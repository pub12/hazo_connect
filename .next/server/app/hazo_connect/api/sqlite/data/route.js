"use strict";(()=>{var e={};e.id=66,e.ids=[66],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5290:e=>{e.exports=require("sql.js")},6113:e=>{e.exports=require("crypto")},7147:e=>{e.exports=require("fs")},8188:e=>{e.exports=require("module")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},9068:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>w,patchFetch:()=>x,requestAsyncStorage:()=>m,routeModule:()=>b,serverHooks:()=>q,staticGenerationAsyncStorage:()=>j});var a={};r.r(a),r.d(a,{DELETE:()=>h,GET:()=>l,PATCH:()=>f,POST:()=>p,dynamic:()=>d});var o=r(9303),s=r(8716),n=r(670),i=r(7070),u=r(5949);let d="force-dynamic",c=["eq","neq","gt","gte","lt","lte","like","ilike","is"];async function l(e){let t=new URL(e.url),r=t.searchParams.get("table");if(!r)return i.NextResponse.json({error:"Query parameter 'table' is required."},{status:400});try{let e=(0,u.OC)(),a=function(e){let t=e.get("limit"),r=e.get("offset"),a=e.get("orderBy")??void 0,o=function(e){if(!e)return;let t=e.toLowerCase();if("asc"===t||"desc"===t)return t;throw Error(`Unsupported order direction '${e}'`)}(e.get("orderDirection")),s=function(e){let t=[];return e.forEach((e,r)=>{let a=r.match(/^filter\[(.+?)\](?:\[(.+)\])?$/);if(!a)return;let o=a[1],s=(a[2]??"eq").toLowerCase();if(!c.includes(s))throw Error(`Unsupported filter operator '${s}'`);t.push({column:o,operator:s,value:e})}),t}(e),n=t?Number.parseInt(t,10):void 0,i=r?Number.parseInt(r,10):void 0;return{limit:Number.isNaN(n)?void 0:n,offset:Number.isNaN(i)?void 0:i,order_by:a??void 0,order_direction:o,filters:s.length?s:void 0}}(t.searchParams),o=await e.getTableData(r,a);return i.NextResponse.json({data:o.rows,total:o.total})}catch(e){return y(e,`Failed to fetch data for table '${r}'`)}}async function p(e){try{let t=(0,u.OC)(),r=await e.json(),a=r?.table,o=r?.data;if(!a||"object"!=typeof o||Array.isArray(o))return i.NextResponse.json({error:"Request body must include 'table' and a 'data' object."},{status:400});let s=await t.insertRow(a,o);return i.NextResponse.json({data:s})}catch(e){return y(e,"Failed to insert row")}}async function f(e){try{let t=(0,u.OC)(),r=await e.json(),a=r?.table,o=r?.data,s=r?.criteria;if(!a||"object"!=typeof o||Array.isArray(o)||"object"!=typeof s||null===s||Array.isArray(s))return i.NextResponse.json({error:"Request body must include 'table', 'data' object, and a 'criteria' object for the rows to update."},{status:400});let n=await t.updateRows(a,s,o);return i.NextResponse.json({data:n,updated:n.length})}catch(e){return y(e,"Failed to update rows")}}async function h(e){try{let t=(0,u.OC)(),r=await e.json(),a=r?.table,o=r?.criteria;if(!a||"object"!=typeof o||null===o||Array.isArray(o))return i.NextResponse.json({error:"Request body must include 'table' and a 'criteria' object for the rows to delete."},{status:400});let s=await t.deleteRows(a,o);return i.NextResponse.json({data:s,deleted:s.length})}catch(e){return y(e,"Failed to delete rows")}}function y(e,t){let r=e instanceof Error?e.message:t,a=r.toLowerCase().includes("required")?400:500;return i.NextResponse.json({error:r},{status:a})}let b=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/hazo_connect/api/sqlite/data/route",pathname:"/hazo_connect/api/sqlite/data",filename:"route",bundlePath:"app/hazo_connect/api/sqlite/data/route"},resolvedPagePath:"/Users/pubuduabayasiri/Documents/04 - Code/99.lib/hazo_connect/app/hazo_connect/api/sqlite/data/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:m,staticGenerationAsyncStorage:j,serverHooks:q}=b,w="/hazo_connect/api/sqlite/data/route";function x(){return(0,n.patchFetch)({serverHooks:q,staticGenerationAsyncStorage:j})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[724,767,972,949],()=>r(9068));module.exports=a})();